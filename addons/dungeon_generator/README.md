# Godot Procedural Dungeon Generator

A high-performance GDExtension for procedural dungeon generation in Godot 4.x. This addon provides five powerful C++ algorithms exposed to GDScript.

## Features

### 1. Algorithms
- **BSP (Binary Space Partitioning):** Classic roguelike dungeon generation with rectangular rooms and corridors.
- **Walker:** Organic, cave-like structures generated by random walkers.
- **Tiling WFC:** Wave Function Collapse algorithm for constraint-based tile placement.
- **Overlapping WFC:** Pattern-matching WFC that generates levels from an input image.
- **Hybrid:** A physics-based room placement system combined with cellular automata and walkers for varied layouts.

### 2. Tools
- **DungeonPreview:** A visual editor node to preview, test, and debug generations directly in the Godot editor.
- **Native TileMapLayer Integration:** Automatically populate TileMapLayers with generated results.
- **Performance:** Optimized C++ implementation for fast runtime generation.

## Installation

**IMPORTANT:** This addon requires compiled C++ binaries.

1. **Build:** Follow the build instructions in the root `README.md` or `docs/BUILD.md`.
2. **Copy:** Copy this `dungeon_generator` folder to your Godot project's `addons/` directory.
   - Example: `res://addons/dungeon_generator/`
3. **Restart:** Restart the Godot editor to load the GDExtension.
4. **Enable:** Go to **Project > Project Settings > Plugins** and enable `DungeonGenerator`.

## Usage

### Method A: Visual Preview (Editor)
1. Add a `DungeonPreview` node to your scene.
2. Select the **Algorithm** in the Inspector (e.g., BSP, Walker, WFC, etc.).
3. Adjust the settings (Map Size, Seed, etc.).
4. Assign a **Target TileMapLayer** (optional).
5. Toggle the **Generate** checkbox to create a dungeon.

### Method B: GDScript API

```gdscript
# --- BSP Example ---
var bsp = BSPDungeonGenerator.new()
bsp.set_map_size(80, 60)
bsp.set_room_size_range(5, 12)
var result = bsp.generate()
# Access floors: result.get_floor_positions()

# --- Walker Example ---
var walker = WalkerDungeonGenerator.new()
walker.set_total_floor_count(500)
var result = walker.generate()

# --- Hybrid Example ---
var hybrid = HybridDungeonGenerator.new()
hybrid.room_count = 200
hybrid.spread_radius = 50.0
hybrid.set_grid_size(200, 150)
var result = hybrid.generate()
# Access rooms: result.get_rooms()

# --- Tiling WFC Example ---
var wfc = GDTilingWFCv2.new()
wfc.use_connection_system()
# ... configure tiles ...
var result = wfc.run()
```

## Documentation

For detailed API documentation and advanced usage, see the `docs/` folder in the repository root.